# FeaturePreview 组件增强文档

## 🚀 组件概述

FeaturePreview 是功能清单定义页面的核心预览组件，用于实时展示和管理功能配置的可视化界面。

## ✨ 增强功能

### 1. 统计信息面板

- **总功能数量**: 显示配置中的总功能数
- **已启用功能**: 显示当前启用的功能数量
- **带参数功能**: 显示配置了参数的功能数量
- **带子功能**: 显示包含子功能的功能数量

### 2. 搜索功能

- **实时搜索**: 根据功能名称、描述进行模糊搜索
- **高亮匹配**: 搜索结果高亮显示
- **清空功能**: 一键清空搜索条件

### 3. 过滤器系统

- **全部功能**: 显示所有功能
- **已启用**: 只显示启用的功能
- **未启用**: 只显示未启用的功能

### 4. 增强的功能卡片

- **状态指示**: 清晰的启用/禁用状态标识
- **参数预览**: 智能截断长参数值，支持悬停查看完整内容
- **层级显示**: 支持多层级功能嵌套展示
- **图标系统**: 直观的图标表示不同功能类型

### 5. 智能交互

- **展开/收起**: 支持预览面板的展开和收起
- **响应式布局**: 适配不同屏幕尺寸
- **悬停效果**: 流畅的交互动画

### 6. 错误处理

- **JSON 解析错误**: 友好的错误提示
- **空数据处理**: 优雅的空状态展示
- **搜索无结果**: 贴心的无结果提示

## 🎨 UI/UX 特色

### 设计原则

- **现代化设计**: 采用卡片化、渐变、圆角设计
- **一致性**: 与整体应用风格保持一致
- **可访问性**: 支持键盘导航和屏幕阅读器

### 视觉元素

- **颜色体系**:

  - 启用功能: 绿色系 (#52c41a)
  - 禁用功能: 灰色系 (#d9d9d9)
  - 参数标签: 蓝色系 (#1890ff)
  - 子功能: 紫色系 (#722ed1)

- **图标语言**:
  - 设置图标: 参数配置
  - 分支图标: 子功能
  - API 图标: 接口参数
  - 检查图标: 状态确认

## 📋 组件接口

```typescript
interface FeaturePreviewProps {
  data: any; // 功能配置数据
  isExpanded: boolean; // 是否展开状态
  onExpandChange: (expanded: boolean) => void; // 展开状态变化回调
}
```

## 🛠️ 技术实现

### 核心功能

1. **数据解析**: 智能解析 JSON 字符串或对象
2. **递归渲染**: 支持无限层级的功能嵌套
3. **实时过滤**: 高效的搜索和过滤算法
4. **状态管理**: 使用 React Hooks 管理组件状态

### 性能优化

- **useMemo**: 缓存计算结果，避免重复计算
- **懒加载**: 大数据量时的性能优化
- **虚拟滚动**: 支持大量功能的流畅展示

## 📱 响应式设计

### 断点适配

- **小屏设备** (<768px): 单列布局，紧凑显示
- **中屏设备** (768px-1024px): 双列布局
- **大屏设备** (>1024px): 多列布局，完整功能

### 交互优化

- **触控友好**: 适合移动设备操作
- **快捷键支持**: 键盘导航优化
- **手势支持**: 滑动和点击交互

## 🔧 使用示例

```tsx
// 基本使用
<FeaturePreview
  data={featureConfigData}
  isExpanded={false}
  onExpandChange={setExpanded}
/>;

// 与状态管理集成
const [expanded, setExpanded] = useState(false);
const [configData] = useFeatureSchema();

<FeaturePreview
  data={configData}
  isExpanded={expanded}
  onExpandChange={setExpanded}
/>;
```

## 🎯 未来规划

### 计划功能

- **拖拽排序**: 支持功能重新排序
- **批量操作**: 批量启用/禁用功能
- **导出功能**: 导出当前视图为 PDF/图片
- **历史记录**: 功能配置变更历史

### 性能优化

- **虚拟列表**: 大数据量优化
- **增量更新**: 智能 diff 算法
- **缓存策略**: 本地缓存优化

---

_文档更新时间: 2025 年 7 月 4 日_
